<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cocina de Monster Hunter</title>
    <style>
        .cooking-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .ingredients-section {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .ingredient-type {
            flex: 1;
        }

        .ingredients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .ingredient-item {
            cursor: pointer;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            background: white;
            transition: transform 0.2s;
        }

        .ingredient-item:hover {
            transform: scale(1.05);
        }

        .ingredient-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .ingredient-item img {
            width: 64px;
            height: 64px;
        }

        .selected-ingredients {
            margin-bottom: 30px;
        }

        .selection-slots {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .slot {
            width: 100px;
            height: 100px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .slot img {
            width: 64px;
            height: 64px;
        }

        .effects-panel {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="cooking-container">
        <h1>Cocina de Monster Hunter</h1>
        
        <div class="ingredients-section">
            <div class="ingredient-type">
                <h2>Ración</h2>
                <div id="racion-grid" class="ingredients-grid"></div>
            </div>
            
            <div class="ingredient-type">
                <h2>Adicional</h2>
                <div id="adicional-grid" class="ingredients-grid"></div>
            </div>
            
            <div class="ingredient-type">
                <h2>Toque Final</h2>
                <div id="toque-grid" class="ingredients-grid"></div>
            </div>
        </div>

        <div class="selected-ingredients">
            <h2>Ingredientes Seleccionados</h2>
            <div class="selection-slots">
                <div id="racion-slot" class="slot">
                    <span>Ración</span>
                </div>
                <div id="adicional-slot" class="slot">
                    <span>Adicional</span>
                </div>
                <div id="toque-slot" class="slot">
                    <span>Toque</span>
                </div>
            </div>
        </div>

        <div class="effects-panel">
            <h2>Efectos del Menú</h2>
            <div id="effects-list"></div>
        </div>
    </div>
    <script>
        let menuData = [];
        let selectedIngredients = {
            racion: null,
            adicional: null,
            toque: null
        };

        async function loadMenuData() {
            const response = await fetch('https://raw.githubusercontent.com/ellandeperez/MHBestiary/refs/heads/main/menu.json');
            menuData = await response.json();
            renderIngredients();
        }

        function renderIngredients() {
            const tipos = ['racion', 'adicional', 'toque'];
            tipos.forEach(tipo => {
                const grid = document.getElementById(`${tipo}-grid`);
                const ingredients = menuData.filter(item => item.tipo === tipo);
                
                grid.innerHTML = ingredients.map(ing => `
                    <div class="ingredient-item" onclick="selectIngredient('${tipo}', ${menuData.indexOf(ing)})">
                        <img src="https://github.com/ellandeperez/MHBestiary/main/MHImages/0_Icons/food/m_${ing.icon}.png" alt="${ing.name}">
                        <div>${ing.name}</div>
                    </div>
                `).join('');
            });
            
            updateIngredientStates();
        }

        function selectIngredient(tipo, index) {
            const ingredient = menuData[index];
            
            if (tipo === 'adicional' && !selectedIngredients.racion) return;
            if (tipo === 'toque' && !selectedIngredients.adicional) return;
            
            selectedIngredients[tipo] = ingredient;
            updateSlots();
            updateEffects();
            updateIngredientStates();
        }

        function updateSlots() {
            Object.entries(selectedIngredients).forEach(([tipo, ing]) => {
                const slot = document.getElementById(`${tipo}-slot`);
                if (ing) {
                    slot.innerHTML = `
                        <img src="https://github.com/ellandeperez/MHBestiary/main/MHImages/0_Icons/food/f_${ing.icon.replace(/\d+$/, '')}.png" alt="${ing.name}">
                        <span>${ing.name}</span>
                    `;
                } else {
                    slot.innerHTML = `<span>${tipo.charAt(0).toUpperCase() + tipo.slice(1)}</span>`;
                }
            });
        }

        function updateEffects() {
            const effectsList = document.getElementById('effects-list');
            let effects = [];
            
            if (selectedIngredients.racion) {
                effects.push('Salud +50');
                effects.push('Resistencia +150');
            }
            
            if (selectedIngredients.adicional) {
                effects.push('Duración +50:00');
            } else if (selectedIngredients.racion) {
                effects.push('Duración +30:00');
            }
            
            if (selectedIngredients.toque) {
                effects.push('Defensa elemental +5');
            }
            
            Object.values(selectedIngredients).forEach(ing => {
                if (ing) {
                    effects.push(`${ing.effect}: ${ing.description}`);
                }
            });
            
            effectsList.innerHTML = effects.map(effect => `<div>${effect}</div>`).join('');
        }

        function updateIngredientStates() {
            const adicionalItems = document.querySelectorAll('#adicional-grid .ingredient-item');
            const toqueItems = document.querySelectorAll('#toque-grid .ingredient-item');
            
            adicionalItems.forEach(item => {
                if (!selectedIngredients.racion) {
                    item.classList.add('disabled');
                } else {
                    item.classList.remove('disabled');
                }
            });
            
            toqueItems.forEach(item => {
                if (!selectedIngredients.adicional) {
                    item.classList.add('disabled');
                } else {
                    item.classList.remove('disabled');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', loadMenuData);
    </script>
</body>
</html>
